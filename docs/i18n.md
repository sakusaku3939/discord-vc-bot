# 多言語対応について

このボットは、ユーザーのDiscord言語設定を自動検出し、適切な言語でコマンドとメッセージを表示します。

## サポートされている言語

- 日本語 (ja)
- 英語 (en)

## 新しい言語を追加する方法

### 1. 翻訳ファイルを作成

`locales/` フォルダに新しい言語のJSONファイルを作成します。

例: `locales/ja.json` (日本語の場合)

```json
{
  "commands": {
    "channel": {
      "name": "channel",
      "description": "テストテスト",
      ...
    }
  }
}
```

### 2. 言語マッピングを追加

`utils/i18n.ts` の `getLocale()` メソッドに新しい言語を追加します：

```typescript
const localeMap: { [key: string]: string } = {
    "ja": "ja",
    "en-US": "en",
    "en-GB": "en",
    ...
};
```

### 3. コマンド登録に追加

`register-commands.ts` のローカライゼーション設定に新しい言語を追加します：

```typescript
commandData.description_localizations = {
    "en-US": i18n.t(`commands.${commandName}.description`, "en"),
    "ja": i18n.t(`commands.${commandName}.description`, "ja"),
};
```

### 4. コマンドを再登録

```bash
npm run register
```

## 翻訳ファイルの構造

翻訳ファイルは階層構造で管理されています：

```json
{
  "commands": {
    "コマンド名": {
      "description": "コマンドの説明",
      "options": {
        "オプション名": {
          "name": "オプション名",
          "description": "オプションの説明"
        }
      },
      "success": "成功メッセージ",
      "error": "エラーメッセージ"
    }
  },
  "common": {
    "error": "共通エラーメッセージ",
    "moved": "移動完了メッセージ"
  }
}
```

## 動的な値の使用

メッセージに動的な値を含める場合は、`{{変数名}}` を使用します：

```json
{
  "success": "{{from}}から{{to}}へ移動しました。"
}
```

コード内での使用：

```typescript
i18n.t("commands.channel.success", locale, {from: "ロビー", to: "一般"});
```
